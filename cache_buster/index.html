<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="What is cache busting?"><meta name="keywords" content="rust, rustlang, rust-lang, cache_buster"><title>cache_buster - Rust</title><link rel="stylesheet" type="text/css" href="../normalize.css"><link rel="stylesheet" type="text/css" href="../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../light.css"  id="themeStyle"><link rel="stylesheet" type="text/css" href="../dark.css" disabled ><link rel="stylesheet" type="text/css" href="../ayu.css" disabled ><script id="default-settings"></script><script src="../storage.js"></script><script src="../crates.js"></script><noscript><link rel="stylesheet" href="../noscript.css"></noscript><link rel="icon" type="image/svg+xml" href="../favicon.svg">
<link rel="alternate icon" type="image/png" href="../favicon-16x16.png">
<link rel="alternate icon" type="image/png" href="../favicon-32x32.png"><style type="text/css">#crate-search{background-image:url("../down-arrow.svg");}</style></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu" role="button">&#9776;</div><a href='../cache_buster/index.html'><div class='logo-container rust-logo'><img src='../rust-logo.png' alt='logo'></div></a><h2 class="location">Crate cache_buster</h2><div class="block version"><p>Version 0.2.0</p></div><div class="sidebar-elems"><a id="all-types" href="all.html"><p>See all cache_buster's items</p></a><div class="block items"><ul><li><a href="#modules">Modules</a></li><li><a href="#constants">Constants</a></li></ul></div><div id="sidebar-vars" data-name="cache_buster" data-ty="mod" data-relpath=""></div><script defer src="sidebar-items.js"></script></div></nav><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!" aria-haspopup="menu" title="themes"><img src="../brush.svg" width="18" height="18" alt="Pick another theme!"></button><div id="theme-choices" role="menu"></div></div><nav class="sub"><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" disabled autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><button type="button" id="help-button" title="help">?</button><a id="settings-menu" href="../settings.html" title="settings"><img src="../wheel.svg" width="18" height="18" alt="Change settings"></a></div></form></nav><section id="main" class="content"><h1 class="fqn"><span class="in-band">Crate <a class="mod" href="#">cache_buster</a><button id="copy-path" onclick="copy_path(this)" title="copy path"><img src="../clipboard.svg" width="19" height="18" alt="Copy item import" title="Copy item import to clipboard"></button></span><span class="out-of-band"><span id="render-detail"><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span><a class="srclink" href="../src/cache_buster/lib.rs.html#7-73" title="goto source code">[src]</a></span></h1><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><h1 id="what-is-cache-busting" class="section-header"><a href="#what-is-cache-busting">What is cache busting?</a></h1>
<p>To optimise network load time, browsers cache static files. Caching
greatly improves performance but how do you inform browsers to
invalidate cache when your files have changed?</p>
<p>Cache busting is a simple but effective solution for this issue. There
are several ways to achieve this but the way this library does this is
by changing file names to include the hash of the files’ contents.</p>
<p>So if you have <code>bundle.js</code>, it will become
<code>bundle.&lt;long-sha256-hash&gt;.js</code>. This lets you set a super long cache age
as, because of the file names changing, the path to the filename, too,
will change. So as far as the browser is concerned, you are trying to load
a file that it doesn’t have. Pretty neat, isn’t it?</p>
<h2 id="example" class="section-header"><a href="#example">Example:</a></h2>
<ul>
<li><code>build.rs</code></li>
</ul>

<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">cache_buster::BusterBuilder</span>;

<span class="comment">// note: add error checking yourself.</span>
<span class="comment">//    println!(&quot;cargo:rustc-env=GIT_process={}&quot;, git_process);</span>
<span class="kw">let</span> <span class="ident">types</span> <span class="op">=</span> <span class="macro">vec!</span>[
    <span class="ident">mime::IMAGE_PNG</span>,
    <span class="ident">mime::IMAGE_SVG</span>,
    <span class="ident">mime::IMAGE_JPEG</span>,
    <span class="ident">mime::IMAGE_GIF</span>,
];

<span class="kw">let</span> <span class="ident">config</span> <span class="op">=</span> <span class="ident">BusterBuilder::default</span>()
    .<span class="ident">source</span>(<span class="string">&quot;./dist&quot;</span>)
    .<span class="ident">result</span>(<span class="string">&quot;./prod&quot;</span>)
    .<span class="ident">mime_types</span>(<span class="ident">types</span>)
    .<span class="ident">copy</span>(<span class="bool-val">true</span>)
    .<span class="ident">follow_links</span>(<span class="bool-val">true</span>)
    .<span class="ident">build</span>()
    .<span class="ident">unwrap</span>();

<span class="ident">config</span>.<span class="ident">process</span>().<span class="ident">unwrap</span>();</pre></div>
<ul>
<li><code>main.rs</code>:</li>
</ul>
<p>Module describing runtime compoenet for fetching modified filenames</p>
<p>Add the following tou your program to load the filemap during compiletime:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">cache_buster::Files</span>;
<span class="kw">use</span> <span class="ident">cache_buster::CACHE_BUSTER_DATA_FILE</span>;

<span class="kw">let</span> <span class="ident">files</span> <span class="op">=</span> <span class="ident">Files::new</span>(<span class="ident">CACHE_BUSTER_DATA_FILE</span>);
<span class="comment">// the path to the file before setting up for cache busting</span>
<span class="ident">files</span>.<span class="ident">get</span>(<span class="string">&quot;./dist/github.svg&quot;</span>);</pre></div>
</div></details><h2 id="reexports" class="section-header"><a href="#reexports">Re-exports</a></h2>
<table><tr class="import-item"><td><code>pub use processor::<a class="struct" href="processor/struct.BusterBuilder.html" title="struct cache_buster::processor::BusterBuilder">BusterBuilder</a>;</code></td><td class="docblock-short"></td></tr><tr class="import-item"><td><code>pub use processor::<a class="enum" href="processor/enum.NoHashCategory.html" title="enum cache_buster::processor::NoHashCategory">NoHashCategory</a>;</code></td><td class="docblock-short"></td></tr><tr class="import-item"><td><code>pub use filemap::<a class="struct" href="filemap/struct.Files.html" title="struct cache_buster::filemap::Files">Files</a>;</code></td><td class="docblock-short"></td></tr></table><h2 id="modules" class="section-header"><a href="#modules">Modules</a></h2>
<table><tr class="module-item"><td><a class="mod" href="filemap/index.html" title="cache_buster::filemap mod">filemap</a></td><td class="docblock-short"><p>Module describing runtime compoenet for fetching modified filenames</p>
</td></tr><tr class="module-item"><td><a class="mod" href="processor/index.html" title="cache_buster::processor mod">processor</a></td><td class="docblock-short"><p>Module describing file processor that changes filenames to setup cache-busting</p>
</td></tr></table><h2 id="constants" class="section-header"><a href="#constants">Constants</a></h2>
<table><tr class="module-item"><td><a class="constant" href="constant.CACHE_BUSTER_DATA_FILE.html" title="cache_buster::CACHE_BUSTER_DATA_FILE constant">CACHE_BUSTER_DATA_FILE</a></td><td class="docblock-short"><p>file to which filemap is written during compilation
include this to <code>.gitignore</code></p>
</td></tr></table></section><section id="search" class="content hidden"></section><div id="rustdoc-vars" data-root-path="../" data-current-crate="cache_buster" data-search-index-js="../search-index.js" data-search-js="../search.js"></div><script src="../main.js"></script></body></html>