<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="What is cache busting?"><meta name="keywords" content="rust, rustlang, rust-lang, cache_buster"><title>cache_buster - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceSerif4-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../FiraSans-Regular.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../FiraSans-Medium.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceCodePro-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceSerif4-Bold.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceCodePro-Semibold.ttf.woff2"><link rel="stylesheet" type="text/css" href="../normalize.css"><link rel="stylesheet" type="text/css" href="../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../ayu.css" disabled><link rel="stylesheet" type="text/css" href="../dark.css" disabled><link rel="stylesheet" type="text/css" href="../light.css" id="themeStyle"><script id="default-settings" ></script><script src="../storage.js"></script><script src="../crates.js"></script><script defer src="../main.js"></script>
    <noscript><link rel="stylesheet" href="../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../favicon.svg"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="sidebar-logo" href="../cache_buster/index.html"><div class="logo-container"><img class="rust-logo" src="../rust-logo.svg" alt="logo"></div>
        </a><h2 class="location"></h2>
    </nav>
    <nav class="sidebar"><a class="sidebar-logo" href="../cache_buster/index.html"><div class="logo-container"><img class="rust-logo" src="../rust-logo.svg" alt="logo"></div>
        </a><h2 class="location"><a href="#">Crate cache_buster</a></h2><div class="sidebar-elems"><div class="block"><ul><li class="version">Version 0.2.0</li><li><a id="all-types" href="all.html">All Items</a></li></div></ul><section><div class="block"><ul><li><a href="#modules">Modules</a></li><li><a href="#constants">Constants</a></li></ul></div></section><div id="sidebar-vars" data-name="cache_buster" data-ty="mod" data-relpath=""></div><script defer src="sidebar-items.js"></script></div></nav><main><div class="width-limiter"><div class="sub-container"><a class="sub-logo-container" href="../cache_buster/index.html"><img class="rust-logo" src="../rust-logo.svg" alt="logo"></a><nav class="sub"><div class="theme-picker hidden"><button id="theme-picker" aria-label="Pick another theme!" aria-haspopup="menu" title="themes"><img width="22" height="22" alt="Pick another theme!" src="../brush.svg"></button><div id="theme-choices" role="menu"></div></div><form class="search-form"><div class="search-container"><span></span><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><button type="button" id="help-button" title="help">?</button><a id="settings-menu" href="../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../wheel.svg"></a></div></form></nav></div><section id="main-content" class="content"><div class="main-heading">
    <h1 class="fqn"><span class="in-band">Crate <a class="mod" href="#">cache_buster</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../clipboard.svg" width="19" height="18" alt="Copy item path"></button></span></h1><span class="out-of-band"><a class="srclink" href="../src/cache_buster/lib.rs.html#7-72">source</a> · <a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span></div><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><h2 id="what-is-cache-busting"><a href="#what-is-cache-busting">What is cache busting?</a></h2>
<p>To optimise network load time, browsers cache static files. Caching
greatly improves performance but how do you inform browsers to
invalidate cache when your files have changed?</p>
<p>Cache busting is a simple but effective solution for this issue. There
are several ways to achieve this but the way this library does this is
by changing file names to include the hash of the files’ contents.</p>
<p>So if you have <code>bundle.js</code>, it will become
<code>bundle.&lt;long-sha256-hash&gt;.js</code>. This lets you set a super long cache age
as, because of the file names changing, the path to the filename, too,
will change. So as far as the browser is concerned, you are trying to load
a file that it doesn’t have. Pretty neat, isn’t it?</p>
<h3 id="example"><a href="#example">Example:</a></h3>
<ul>
<li><code>build.rs</code></li>
</ul>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use</span> <span class="ident">cache_buster::BusterBuilder</span>;

<span class="comment">// note: add error checking yourself.</span>
<span class="comment">//    println!(&quot;cargo:rustc-env=GIT_process={}&quot;, git_process);</span>
<span class="kw">let</span> <span class="ident">types</span> <span class="op">=</span> <span class="macro">vec!</span>[
    <span class="ident">mime::IMAGE_PNG</span>,
    <span class="ident">mime::IMAGE_SVG</span>,
    <span class="ident">mime::IMAGE_JPEG</span>,
    <span class="ident">mime::IMAGE_GIF</span>,
];

<span class="kw">let</span> <span class="ident">config</span> <span class="op">=</span> <span class="ident">BusterBuilder::default</span>()
    .<span class="ident">source</span>(<span class="string">&quot;./dist&quot;</span>)
    .<span class="ident">result</span>(<span class="string">&quot;./prod&quot;</span>)
    .<span class="ident">mime_types</span>(<span class="ident">types</span>)
    .<span class="ident">follow_links</span>(<span class="bool-val">true</span>)
    .<span class="ident">build</span>()
    .<span class="ident">unwrap</span>();

<span class="ident">config</span>.<span class="ident">process</span>().<span class="ident">unwrap</span>();</code></pre></div>
<ul>
<li><code>main.rs</code>:</li>
</ul>
<p>Module describing runtime compoenet for fetching modified filenames</p>
<p>Add the following tou your program to load the filemap during compiletime:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use</span> <span class="ident">cache_buster::Files</span>;
<span class="kw">use</span> <span class="ident">cache_buster::CACHE_BUSTER_DATA_FILE</span>;

<span class="kw">let</span> <span class="ident">files</span> <span class="op">=</span> <span class="ident">Files::new</span>(<span class="ident">CACHE_BUSTER_DATA_FILE</span>);
<span class="comment">// the path to the file before setting up for cache busting</span>
<span class="ident">files</span>.<span class="ident">get</span>(<span class="string">&quot;./dist/github.svg&quot;</span>);</code></pre></div>
</div></details><h2 id="reexports" class="small-section-header"><a href="#reexports">Re-exports</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left import-item"><code>pub use processor::<a class="struct" href="processor/struct.BusterBuilder.html" title="struct cache_buster::processor::BusterBuilder">BusterBuilder</a>;</code></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left import-item"><code>pub use processor::<a class="enum" href="processor/enum.NoHashCategory.html" title="enum cache_buster::processor::NoHashCategory">NoHashCategory</a>;</code></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left import-item"><code>pub use filemap::<a class="struct" href="filemap/struct.Files.html" title="struct cache_buster::filemap::Files">Files</a>;</code></div><div class="item-right docblock-short"></div></div></div><h2 id="modules" class="small-section-header"><a href="#modules">Modules</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="mod" href="filemap/index.html" title="cache_buster::filemap mod">filemap</a></div><div class="item-right docblock-short"><p>Module describing runtime compoenet for fetching modified filenames</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="processor/index.html" title="cache_buster::processor mod">processor</a></div><div class="item-right docblock-short"><p>Module describing file processor that changes filenames to setup cache-busting</p>
</div></div></div><h2 id="constants" class="small-section-header"><a href="#constants">Constants</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="constant" href="constant.CACHE_BUSTER_DATA_FILE.html" title="cache_buster::CACHE_BUSTER_DATA_FILE constant">CACHE_BUSTER_DATA_FILE</a></div><div class="item-right docblock-short"><p>file to which filemap is written during compilation
include this to <code>.gitignore</code></p>
</div></div></div></section><section id="search" class="content hidden"></section></div></main><div id="rustdoc-vars" data-root-path="../" data-current-crate="cache_buster" data-themes="ayu,dark,light" data-resource-suffix="" data-rustdoc-version="1.60.0 (7737e0b5c 2022-04-04)" ></div>
</body></html>